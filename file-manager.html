<script type="text/javascript">
  RED.nodes.registerType("save-file", {
    category: "file manager",
    color: "#C7E9C0",
    defaults: {
      name: { value: "" },
      filePath: { value: "" },
    },
    inputs: 1,
    outputs: 1,
    paletteLabel: "save-file",
    icon: "file.png",
    label: function () {
      return this.name || "save-file";
    },
    oneditprepare: function () {
      if (!this.pathType) {
        this.pathType = "str";
      }
      $("#node-input-filePath").typedInput({
        default: "str",
        types: ["str", "msg", "flow", "global", "env"],
        typeField: $("#node-input-pathType"),
      });
    },
  });
</script>

<script type="text/html" data-template-name="save-file">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name" />
  </div>
  <div class="form-row">
    <label for="node-input-filePath"
      ><i class="fa fa-folder"></i> File Path</label
    >
    <input
      type="text"
      id="node-input-filePath"
      placeholder="Path to move from"
      style="width:250px;"
    />
    <input type="hidden" id="node-input-pathType" />
  </div>
</script>

<script type="text/html" data-help-name="save-file">
  <p>Save Uploaded File in Local Folder</p>

    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>name
            <span class="property-type">string</span>
        </dt>
        <dd>Name of node to be displayed in editor</dd>
        <dt>file path<span class="property-type">string</span></dt>
        <dd>Destionation of the file path example: /file</dd>        
        <dt>file<span class="property-type">string</span></dt>
        <dd>base64 string of the file's</dd>        
    </dl>    
    <h3>Outputs</h3>
    <dl class="message-properties">
    <p>It will return file path</p>
    </dl>

    <h3>Details</h3>
    <p>Create a new file from base64 string and save into local folder</p>
</script>
